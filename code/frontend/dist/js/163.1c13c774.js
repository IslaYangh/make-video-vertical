"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[163],{627:function(e,a,l){l.d(a,{jr:function(){return n},uC:function(){return u},a2:function(){return i},rR:function(){return o},dS:function(){return r}});var t=l(1374);const n=e=>t.Z.get("/api/file/page",{params:e}),u=e=>t.Z["delete"]("/api/file/"+e),i=e=>t.Z.post("/api/file/upload",e,{headers:{"Content-Type":"multipart/form-data"}}),o=e=>t.Z.post("/video-api/processVideo",e,{hideMessage:!0}),r=e=>t.Z.put("/api/file/setResult",e)},2900:function(e,a,l){l.d(a,{lx:function(){return n},bb:function(){return u},rj:function(){return i},nz:function(){return o},N0:function(){return r},dg:function(){return s}});var t=l(1374);const n=e=>t.Z.post("/api/user/login",e),u=e=>t.Z.get("/api/user/page",{params:e}),i=e=>t.Z["delete"]("/api/user/"+e),o=e=>t.Z.post("/api/user",e),r=e=>t.Z.put("/api/user",e),s=e=>t.Z.get("/api/user",{params:e})},1163:function(e,a,l){l.r(a),l.d(a,{default:function(){return Z}});var t=l(3396),n=l(4870),u=l(7139),i=l(5743),o=l.n(i),r=l(6666),s=l(627),p=l(7601),d=l(2900);const c=e=>((0,t.dD)("data-v-f1fdc0c6"),e=e(),(0,t.Cn)(),e),f={class:"page"},g=(0,t.Uk)("重置"),v=(0,t.Uk)("搜索"),m={class:"item"},w=["src","onClick"],h={class:"name"},_={class:"create"},k={class:"action"},C=["onClick"],y=c((()=>(0,t._)("i",{class:"iconfont icon-shanchu"},null,-1))),U=["src"];var b={setup(e){const a=(0,n.iH)((0,p.PR)()),l=(0,n.qj)({pageNum:1,pageSize:10,userId:a.value.isAdmin?null:a.value.id}),i=()=>{l.userId=null,S()},c=(0,n.iH)(!1),b=(0,n.iH)([]),z=(0,n.iH)(0),S=()=>{c.value=!0,(0,s.jr)(l).then((e=>{b.value=e.data.list,z.value=e.data.total})).finally((()=>{c.value=!1}))};S();const Z=e=>{(0,s.uC)(e).then((()=>{r.bM.success("删除成功"),S()}))},j=(0,n.iH)([]);a.value.isAdmin&&(0,d.dg)().then((e=>{j.value=e.data}));const H=e=>{window.open("/api"+e.filePath)},W=(0,n.iH)({}),V=e=>{W.value=e,W.value.show=!0},D=e=>{W.value={},W.value.show=!1,e()};return(e,r)=>{const s=(0,t.up)("el-option"),p=(0,t.up)("el-select"),d=(0,t.up)("el-col"),N=(0,t.up)("el-button"),Y=(0,t.up)("el-row"),I=(0,t.up)("el-popconfirm"),A=(0,t.up)("el-empty"),M=(0,t.up)("el-pagination"),P=(0,t.up)("el-dialog"),q=(0,t.Q2)("loading");return(0,t.wy)(((0,t.wg)(),(0,t.iD)("div",f,[a.value.isAdmin?((0,t.wg)(),(0,t.j4)(Y,{key:0,gutter:30},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{span:4},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{modelValue:(0,n.SU)(l).userId,"onUpdate:modelValue":r[0]||(r[0]=e=>(0,n.SU)(l).userId=e),placeholder:"请选择用户",clearable:"",filterable:""},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(j.value,(e=>((0,t.wg)(),(0,t.j4)(s,{key:e.id,label:e.username,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)(d,{span:8},{default:(0,t.w5)((()=>[(0,t.Wm)(N,{type:"primary",onClick:i},{default:(0,t.w5)((()=>[g])),_:1}),(0,t.Wm)(N,{type:"primary",onClick:S},{default:(0,t.w5)((()=>[v])),_:1})])),_:1})])),_:1})):(0,t.kq)("",!0),(0,t.Wm)(Y,{gutter:30},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{span:24},{default:(0,t.w5)((()=>[b.value.length?((0,t.wg)(),(0,t.j4)(Y,{key:0,gutter:30},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(b.value,(e=>((0,t.wg)(),(0,t.j4)(d,{span:4,key:e.id},{default:(0,t.w5)((()=>[(0,t._)("div",m,[(0,t._)("video",{src:"/api"+e.filePath,onClick:a=>V(e)},null,8,w),(0,t._)("div",h,(0,u.zw)(e.fileName),1),(0,t._)("div",_,(0,u.zw)((0,n.SU)(o())(e.createAt).format("YYYY-MM-DD HH:mm:ss")),1),(0,t._)("div",k,[(0,t._)("i",{class:"iconfont icon-xiazai",onClick:a=>H(e)},null,8,C),(0,t.Wm)(I,{title:"确定删除吗?",onConfirm:a=>Z(e.id)},{reference:(0,t.w5)((()=>[y])),_:2},1032,["onConfirm"])])])])),_:2},1024)))),128))])),_:1})):((0,t.wg)(),(0,t.j4)(A,{key:1,description:"暂无素材"})),b.value.length?((0,t.wg)(),(0,t.j4)(M,{key:2,"current-page":(0,n.SU)(l).pageNum,"onUpdate:current-page":r[1]||(r[1]=e=>(0,n.SU)(l).pageNum=e),"page-size":(0,n.SU)(l).pageSize,"onUpdate:page-size":r[2]||(r[2]=e=>(0,n.SU)(l).pageSize=e),background:"",layout:"total, prev, pager, next","page-sizes":[10,20,50],total:z.value,onSizeChange:S,onCurrentChange:S},null,8,["current-page","page-size","total"])):(0,t.kq)("",!0)])),_:1})])),_:1}),(0,t.Wm)(P,{modelValue:W.value.show,"onUpdate:modelValue":r[3]||(r[3]=e=>W.value.show=e),title:W.value.fileName,"before-close":D,width:"50%"},{default:(0,t.w5)((()=>[(0,t._)("video",{style:{width:"100%"},src:"/api"+W.value.filePath,controls:""},null,8,U)])),_:1},8,["modelValue","title"])])),[[q,c.value]])}}},z=l(89);const S=(0,z.Z)(b,[["__scopeId","data-v-f1fdc0c6"]]);var Z=S}}]);
//# sourceMappingURL=163.1c13c774.js.map